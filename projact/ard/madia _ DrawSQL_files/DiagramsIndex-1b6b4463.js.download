import{_ as Me,A as $e}from"./AppLayout-3068279a.js";import{u as O}from"./use-current-team-7ee0795b.js";import{R as B,f as L,X as i,a3 as n,S as s,T as o,a4 as y,$ as D,i as me,ak as Se,U as t,Y as r,V as d,a2 as j,a6 as $,Z as F,a5 as p,ag as q,a7 as R,a8 as H,W as U,al as De,am as xe,ad as Ee,an as ee,a1 as K,ab as ue,ac as ce,ao as X,k as Be,a9 as N,ae as A,O as ke}from"./index.esm-4dcaccf3.js";import{h as Ae,B as E,t as Ve,_ as Z}from"./app-be8ec49c.js";import{B as fe}from"./BaseSpinner-45530dc1.js";import{B as pe}from"./BasePopover-22de608c.js";import{B as P}from"./BaseSvgIcon-3b58455f.js";import{_ as V}from"./_plugin-vue_export-helper-c27b6911.js";import{M as Ce,W as Ie,_ as Fe}from"./_isIterateeCall-4e0e0f6e.js";import{R as he}from"./role-permissions-feb7b1ca.js";import{B as ge,a as Le}from"./BaseListboxDataDriven-0da3894d.js";import{B as Y}from"./BaseModal-90243189.js";import{B as te}from"./BaseInput-fcb7e685.js";import{B as J}from"./BaseButtonSolid-7d99f2a9.js";import{_ as ae}from"./Label-43647b22.js";import{B as se,L as ve,S as ye}from"./statamic-urls-f2da1c03.js";import{_ as _e}from"./ActionMessage-b254b993.js";import{B as Re}from"./BaseLayout-99d2db20.js";import{_ as ne,M as Oe,B as we}from"./BaseMenu-342036cd.js";import{L as oe}from"./LabelGuest-94fd857d.js";import{_ as Pe}from"./NavbarUserDropdown-bf509c60.js";import"./isArrayLikeObject-ed91f3c8.js";import"./headlessui-float-afd6f717.js";import"./form-a9b2eced.js";import"./use-text-value-460f9583.js";import"./Input-d5846cb4.js";import"./BaseFieldErrors-601b2e42.js";import"./BaseSvgImage-7cdda525.js";import"./Button-b6ac3cc7.js";import"./ValidationErrors-ccdf439b.js";import"./Banner-7ef5394f.js";var le=function(){return Math.random().toString(36).substring(2)},Ge=B({name:"ContentLoader",props:{width:{type:[Number,String]},height:{type:[Number,String]},viewBox:{type:String},preserveAspectRatio:{type:String,default:"xMidYMid meet"},speed:{type:Number,default:2},baseUrl:{type:String,default:""},primaryColor:{type:String,default:"#f9f9f9"},secondaryColor:{type:String,default:"#ecebeb"},primaryOpacity:{type:Number,default:1},secondaryOpacity:{type:Number,default:1},uniqueKey:{type:String},animate:{type:Boolean,default:!0}},setup:function(a){var l=L(function(){return a.uniqueKey?"".concat(a.uniqueKey,"-idClip"):le()}),g=L(function(){return a.uniqueKey?"".concat(a.uniqueKey,"-idGradient"):le()}),h=L(function(){var c;return(c=a.width)!==null&&c!==void 0?c:400}),T=L(function(){var c;return(c=a.height)!==null&&c!==void 0?c:130}),u=L(function(){var c;return(c=a.viewBox)!==null&&c!==void 0?c:"0 0 ".concat(h.value," ").concat(T.value)});return{idClip:l,idGradient:g,computedViewBox:u}},render:function(){return i("svg",{width:this.width,height:this.height,viewBox:this.computedViewBox,version:"1.1",preserveAspectRatio:this.preserveAspectRatio},[i("rect",{style:{fill:"url(".concat(this.baseUrl,"#").concat(this.idGradient,")")},"clip-path":"url(".concat(this.baseUrl,"#").concat(this.idClip,")"),x:"0",y:"0",width:"100%",height:"100%"},null),i("defs",null,[i("clipPath",{id:this.idClip},[this.$slots.default?this.$slots.default():i("rect",{x:"0",y:"0",rx:"5",ry:"5",width:"100%",height:"100%"},null)]),i("linearGradient",{id:this.idGradient},[i("stop",{offset:"0%","stop-color":this.primaryColor,"stop-opacity":this.primaryOpacity},[this.animate?i("animate",{attributeName:"offset",values:"-2; 1",dur:"".concat(this.speed,"s"),repeatCount:"indefinite"},null):null]),i("stop",{offset:"50%","stop-color":this.secondaryColor,"stop-opacity":this.secondaryOpacity},[this.animate?i("animate",{attributeName:"offset",values:"-1.5; 1.5",dur:"".concat(this.speed,"s"),repeatCount:"indefinite"},null):null]),i("stop",{offset:"100%","stop-color":this.primaryColor,"stop-opacity":this.primaryOpacity},[this.animate?i("animate",{attributeName:"offset",values:"-1; 2",dur:"".concat(this.speed,"s"),repeatCount:"indefinite"},null):null])])])])}});const Ue=B({components:{BaseSvgIcon:P},props:{isPrivate:{type:Boolean,required:!1,default:!1}}}),Ne={key:2},He={key:3};function ze(e,a,l,g,h,T){const u=n("BaseSvgIcon");return s(),o("span",{class:D(["ds-label-diagram-visibility inline-flex items-center rounded bg-green-100 px-1 py-0.5 text-xs font-semibold text-green-800",{"is-public":!e.isPrivate}]),title:"No access restrictions. Public diagrams can be viewed by anyone."},[e.isPrivate?(s(),y(u,{key:0,size:1.1,class:"mr-0.5 h-4 w-4",icon:"heroicons/outline/eye-off"})):(s(),y(u,{key:1,size:1.1,class:"mr-0.5 h-4 w-4",icon:"heroicons/outline/eye"})),e.isPrivate?(s(),o("span",Ne,"Private")):(s(),o("span",He,"Public"))],2)}const We=V(Ue,[["render",ze],["__scopeId","data-v-295dd5df"]]),Q={DEFAULT:"view-default",FOLDER_MOVE:"view-folder-move"},je=B({directives:{tooltip:Ce},components:{BaseSpinner:fe,BaseSvgIcon:P,LabelDiagramVisibility:We,BasePopover:pe},props:{diagram:{type:Object,required:!0},folders:{type:Array,required:!1,default:()=>[]},showMoreActions:{type:Boolean,required:!1,default:!0}},emits:["edit","favorite","unfavorite","confirmDelete","movedToFolder"],expose:["focus"],setup(){const{currentTeam:e,currentTeamHasPermission:a}=O(),l=me("emitter");return{currentTeam:e,currentTeamHasPermission:a,emitter:l}},data(){return{view:Q.DEFAULT,isHovered:!1,isDeleting:!1,isFavoriting:!1,isMovingToFolder:!1}},computed:{timestampDisplay(){return this.diagram.blueprint_updated_at&&Ae.utc(this.diagram.blueprint_updated_at).isBefore("2020-12-20","day")?"Created "+this.diagram.blueprint_created_at_relative:"Edited "+this.diagram.blueprint_updated_at_relative}},created(){this.VIEWS=Q,this.ROLE_PERMISSIONS=he},methods:{focus(){this.$refs.diagramCardAnchor.focus()},async favorite(){this.isFavoriting=!0;try{await axios.post(`/api/diagrams/${this.diagram.id}/favorites`),this.$emit("favorite")}catch{this.emitter.emit("toast-error","Could not add diagram to favorites")}finally{this.isFavoriting=!1}},async unfavorite(){this.isFavoriting=!0;try{await axios.delete(`/api/diagrams/${this.diagram.id}/favorites`),this.$emit("unfavorite")}catch{this.emitter.emit("toast-error","Could not remove diagram from favorites")}finally{this.isFavoriting=!1}},confirmDelete(){this.$emit("confirmDelete")},switchViewToFolderMove(){this.view=Q.FOLDER_MOVE},switchViewToDefault(){this.view=Q.DEFAULT},async moveToFolder(e){this.isMovingToFolder=!0,this.$inertia.patch(this.route("team-diagram.update",[this.currentTeam.slug,this.diagram.id]),{folder_id:e.id},{onSuccess:()=>{this.$emit("movedToFolder")},onFinish:()=>{this.isMovingToFolder=!1}})}}}),qe=["href"],Ye=t("div",{class:"w-full bg-gradient-to-r from-emerald-500 to-emerald-300",style:{height:"2px"}},null,-1),Je={class:"relative block h-48 shrink-0 bg-gray-200"},Qe=["src"],Ke={class:"flex flex-1 flex-col justify-between border-t border-gray-200 bg-white px-3 pt-2.5 pb-2"},Ze={class:"mt-2 flex-1 text-lg font-semibold leading-none text-gray-800"},Xe={class:"flex items-center justify-between"},et={class:"my-0.5 flex items-center space-x-2"},tt={class:"mb-0 text-xs text-gray-500"},at={key:0,title:"Favorited",class:"h-6 w-6",style:{color:"#fbbf24"},fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},st=t("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"},null,-1),it=[st],rt=t("svg",{class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M6 10a2 2 0 11-4 0 2 2 0 014 0zM12 10a2 2 0 11-4 0 2 2 0 014 0zM16 12a2 2 0 100-4 2 2 0 000 4z"})],-1),ot=[rt],nt={class:"bg-gray-800 text-gray-100"},lt={key:0},dt=t("div",{class:"mt-2 mb-2 flex items-center px-3 pt-0.5 pb-1 text-xs font-bold uppercase text-gray-400"}," More Actions ",-1),mt=t("svg",{class:"mr-3 h-5 w-5 text-gray-400 group-hover:text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[t("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"}),t("path",{"fill-rule":"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z","clip-rule":"evenodd"})],-1),ut=["href"],ct=t("svg",{class:"mr-3 h-5 w-5 text-gray-400 group-hover:text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[t("path",{d:"M7 9a2 2 0 012-2h6a2 2 0 012 2v6a2 2 0 01-2 2H9a2 2 0 01-2-2V9z"}),t("path",{d:"M5 3a2 2 0 00-2 2v6a2 2 0 002 2V5h8a2 2 0 00-2-2H5z"})],-1),ft=t("svg",{class:"mr-3 h-5 w-5 text-gray-400 group-hover:text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})],-1),pt=t("svg",{class:"mr-3 h-5 w-5 text-gray-400 group-hover:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})],-1),ht=t("svg",{class:"mr-3 h-6 w-6 text-gray-400 group-hover:text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"fill-rule":"evenodd",d:"M2 6a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1H8a3 3 0 00-3 3v1.5a1.5 1.5 0 01-3 0V6z","clip-rule":"evenodd"}),t("path",{d:"M6 12a2 2 0 012-2h8a2 2 0 012 2v2a2 2 0 01-2 2H2h2a2 2 0 002-2v-2z"})],-1),gt=t("div",{class:"flex w-full items-center justify-between"}," Move to folder ",-1),vt=[ht,gt],yt={key:6},_t=t("hr",{class:"my-1 border-gray-600"},null,-1),wt=t("svg",{class:"mr-3 h-5 w-5 text-gray-400 group-hover:text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[t("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1),bt={key:1},Tt={class:"mt-2 mb-2 flex items-center px-3 text-xs font-bold uppercase text-gray-400"},Mt=t("hr",{class:"my-1 border-gray-600"},null,-1),$t={key:0},St=["onClick"],Dt={class:"truncate"},xt={key:1,class:"flex items-center justify-center py-2 px-3 text-sm"},Et={key:2,class:"flex items-center justify-center py-5"};function Bt(e,a,l,g,h,T){const u=n("LabelDiagramVisibility"),c=n("BaseSpinner"),v=n("BaseSvgIcon"),M=n("BasePopover"),b=Se("tooltip");return s(),o("div",{class:"relative block",onMouseover:a[8]||(a[8]=f=>e.isHovered=!0),onMouseleave:a[9]||(a[9]=f=>e.isHovered=!1)},[t("a",{ref:"diagramCardAnchor",href:e.diagram.url,class:"flex flex-col overflow-hidden rounded-lg border-2 border-t-0 border-gray-200 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"},[Ye,t("div",Je,[i(j,{"enter-active-class":"transition ease-out duration-1000","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:r(()=>["blueprint_thumbnail_url"in e.diagram?(s(),o("img",{key:0,class:"h-48 w-full object-cover",src:e.diagram.blueprint_thumbnail_url,alt:""},null,8,Qe)):d("",!0)]),_:1})]),t("div",Ke,[t("h3",Ze,$(e.diagram.name),1),t("div",null,[t("div",Xe,[t("div",et,[t("p",tt,$(e.timestampDisplay),1),i(u,{"is-private":e.diagram.is_private},null,8,["is-private"])]),i(j,{"enter-active-class":"transition ease-in duration-1000 transform origin-left","enter-from-class":"opacity-0 scale-x-50","enter-to-class":"opacity-100 scale-x-100","leave-active-class":"transition ease-in duration-75 transform","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-50"},{default:r(()=>[e.diagram.is_favorited?F((s(),o("svg",at,it)),[[b,{content:"Favorited"}]]):d("",!0)]),_:1})])])])],8,qe),i(j,{"enter-active-class":"ease-out duration-200 transition-transform","enter-from-class":"-translate-y-2","enter-to-class":"translate-y-0","leave-active-class":"transition ease-out duration-200 transform","leave-from-class":"opacity-75 translate-y-0","leave-to-class":"opacity-0 -translate-y-2"},{default:r(()=>[e.showMoreActions&&e.isHovered?(s(),y(M,{key:0,class:"absolute right-0 top-0 mt-2 mr-2",dark:"",width:"14rem",placement:"right-start"},{trigger:r(()=>[t("button",{title:"More actions",type:"button",class:"inline-flex items-center rounded bg-gray-900 p-1 text-xs font-medium text-white opacity-75 hover:bg-teal-500 hover:opacity-100 focus:outline-none",onClick:a[0]||(a[0]=f=>e.view=e.VIEWS.DEFAULT)},ot)]),content:r(()=>[t("div",nt,[e.view===e.VIEWS.DEFAULT?(s(),o("div",lt,[dt,e.currentTeamHasPermission(e.ROLE_PERMISSIONS.DIAGRAM_UPDATE)?(s(),o("div",{key:0,class:"group flex cursor-pointer items-center px-3 py-1.5 text-sm text-gray-200 hover:bg-gray-600 hover:text-gray-200",role:"menuitem",onClick:a[1]||(a[1]=f=>e.$emit("edit"))},[mt,p(" Edit details ")])):d("",!0),e.currentTeamHasPermission(e.ROLE_PERMISSIONS.DIAGRAM_CREATE)?(s(),o("a",{key:1,href:e.diagram.clone_url,target:"_blank",class:"group flex items-center px-3 py-1.5 text-sm text-gray-200 hover:bg-gray-600 hover:text-gray-200",role:"menuitem"},[ct,p(" Make a copy ")],8,ut)):d("",!0),e.isFavoriting?(s(),o("div",{key:2,class:"group flex cursor-pointer items-center px-3 py-1.5 text-sm text-gray-200 hover:bg-gray-600 hover:text-gray-200",role:"menuitem",onClick:a[2]||(a[2]=(...f)=>e.favorite&&e.favorite(...f))},[i(c,{size:5,class:"mr-3 text-gray-400"}),p(" Saving ")])):d("",!0),!e.isFavoriting&&!e.diagram.is_favorited?(s(),o("div",{key:3,class:"group flex cursor-pointer items-center px-3 py-1.5 text-sm text-gray-200 hover:bg-gray-600 hover:text-gray-200",role:"menuitem",onClick:a[3]||(a[3]=(...f)=>e.favorite&&e.favorite(...f))},[ft,p(" Add to favorites ")])):d("",!0),!e.isFavoriting&&e.diagram.is_favorited?(s(),o("div",{key:4,class:"group flex cursor-pointer items-center px-3 py-1.5 text-sm text-gray-200 hover:bg-gray-600 hover:text-gray-200",role:"menuitem",onClick:a[4]||(a[4]=(...f)=>e.unfavorite&&e.unfavorite(...f))},[pt,p(" Unfavorite ")])):d("",!0),e.currentTeamHasPermission(e.ROLE_PERMISSIONS.DIAGRAM_UPDATE)?(s(),o("div",{key:5,class:"group flex cursor-pointer items-center px-3 py-1.5 text-sm text-gray-200 hover:bg-gray-600 hover:text-gray-200",role:"menuitem",onClick:a[5]||(a[5]=(...f)=>e.switchViewToFolderMove&&e.switchViewToFolderMove(...f))},vt)):d("",!0),e.currentTeamHasPermission(e.ROLE_PERMISSIONS.DIAGRAM_DELETE)?(s(),o("div",yt,[_t,t("div",{class:"group flex cursor-pointer items-center px-3 py-1.5 text-sm text-gray-200 hover:bg-gray-600 hover:text-gray-200",role:"menuitem",onClick:a[6]||(a[6]=q(f=>e.confirmDelete(),["prevent","stop"]))},[wt,p(" Delete ")])])):d("",!0)])):d("",!0),e.view===e.VIEWS.FOLDER_MOVE?(s(),o("div",bt,[t("div",Tt,[t("button",{class:"cursor-pointer",onClick:a[7]||(a[7]=(...f)=>e.switchViewToDefault&&e.switchViewToDefault(...f))},[i(v,{icon:"heroicons/outline/chevron-left",size:1.5,class:"mr-1 h-7 w-7 text-gray-400"})]),p(" Move to folder ")]),Mt,e.isMovingToFolder?d("",!0):(s(),o("div",$t,[(s(!0),o(R,null,H(e.folders,f=>(s(),o("div",{key:f.id,class:"group flex cursor-pointer items-center px-3 py-1.5 text-sm text-gray-200 hover:bg-gray-600 hover:text-gray-200",role:"menuitem",onClick:C=>e.moveToFolder(f)},[i(v,{icon:"heroicons/outline/folder",size:1.8,class:"mr-3 h-6 w-6 shrink-0 text-gray-400 group-hover:text-gray-400"}),t("span",Dt,$(f.name),1)],8,St))),128))])),!e.isMovingToFolder&&e.folders.length===0?(s(),o("div",xt," Team has no folders. Create a new folder first. ")):d("",!0),e.isMovingToFolder?(s(),o("div",Et,[i(c,{size:3.5})])):d("",!0)])):d("",!0)])]),_:1})):d("",!0)]),_:1})],32)}const kt=V(je,[["render",Bt]]),At=B({components:{BaseSvgIcon:P},props:{active:{type:Boolean,default:!1},href:{type:[String,null],required:!1,default:null}},computed:{type(){return this.href?"a":"button"},target(){return this.href?"_blank":!1}}});function Vt(e,a,l,g,h,T){return s(),y(xe(e.type),De({href:e.href,target:e.target,class:["group flex w-full cursor-pointer items-center rounded-md border-l-4 border-transparent px-4 py-2 text-sm leading-5 transition duration-150 ease-in-out focus:outline-none",{"bg-gray-100 font-semibold text-indigo-600":e.active,"font-medium text-gray-700 hover:bg-gray-100":!e.active}]},e.$attrs),{default:r(()=>[t("span",{class:D(["-ml-1 mr-2 h-6 w-6 shrink-0 text-gray-400 transition duration-150 ease-in-out",{"text-indigo-600":e.active,"text-gray-400 ":!e.active}])},[U(e.$slots,"icon")],2),U(e.$slots,"default")]),_:3},16,["href","target","class"])}const Ct=V(At,[["render",Vt]]),It=B({components:{BaseButtonWhite:ge,BaseModal:Y},props:{modelValue:{type:Boolean,default:!1,required:!0}},emits:["update:modelValue"]}),Ft={class:"relative mt-8 flex w-full items-center justify-end space-x-4"};function Lt(e,a,l,g,h,T){const u=n("BaseButtonWhite"),c=n("BaseModal");return s(),y(c,{"model-value":e.modelValue,width:"lg","onUpdate:modelValue":a[1]||(a[1]=v=>e.$emit("update:modelValue",v))},{title:r(()=>[U(e.$slots,"title")]),content:r(()=>[t("div",null,[U(e.$slots,"description"),t("div",Ft,[U(e.$slots,"actions",{},()=>[i(u,{onClick:a[0]||(a[0]=v=>e.$emit("update:modelValue"))},{default:r(()=>[p(" Cancel ")]),_:1}),U(e.$slots,"actionConfirm")])])])]),_:3},8,["model-value"])}const Rt=V(It,[["render",Lt]]),Ot=B({components:{BaseForm:se,BaseModal:Y,BaseInput:te,BaseButtonSolid:J,BaseButtonWhite:ge,JetLabel:ae},props:{modelValue:{type:Boolean,default:!1,required:!0}},emits:["update:modelValue","created"],setup(){const{currentTeam:e}=O();return{currentTeam:e}},data(){return{form:Ee({name:""})}},methods:{activate(){this.form.reset(),this.form.clearErrors()},save(){this.form.post(this.route("team-folder.store",this.currentTeam),{onSuccess:()=>{this.$emit("created",{name:this.form.name}),this.form.reset(),this.close()}})},close(){this.$emit("update:modelValue")}}}),Pt={class:"mt-6"},Gt={class:"relative mt-8 flex w-full items-center justify-end space-x-4"};function Ut(e,a,l,g,h,T){const u=n("JetLabel"),c=n("BaseInput"),v=n("BaseButtonWhite"),M=n("BaseButtonSolid"),b=n("BaseForm"),f=n("BaseModal");return s(),y(f,{"model-value":e.modelValue,width:"lg","onUpdate:modelValue":a[1]||(a[1]=C=>e.$emit("update:modelValue",C)),onBeforeOpen:e.activate,onKeydown:ee(e.save,["enter"])},{title:r(()=>[p(" Create new folder ")]),content:r(()=>[i(b,null,{default:r(()=>[t("div",null,[t("div",Pt,[i(u,{for:"folderName",value:"Folder name"}),i(c,{id:"folderName",modelValue:e.form.name,"onUpdate:modelValue":a[0]||(a[0]=C=>e.form.name=C),type:"text",class:"mt-1 block w-full",required:"",error:e.form.errors.name,placeholder:"Name your folder"},null,8,["modelValue","error"])]),t("div",Gt,[i(v,{onClick:e.close},{default:r(()=>[p(" Cancel ")]),_:1},8,["onClick"]),i(M,{"is-loading":e.form.processing,onClick:e.save},{default:r(()=>[p(" Create folder ")]),_:1},8,["is-loading","onClick"])])])]),_:1})]),_:1},8,["model-value","onBeforeOpen","onKeydown"])}const Nt=V(Ot,[["render",Ut]]),Ht=B({components:{BaseButtonSolid:J,BaseForm:se,BaseInput:te,JetLabel:ae,BaseModal:Y},props:{modelValue:{type:Boolean,default:!1,required:!0},folder:{type:Object,default:()=>{},required:!1}},emits:["update:modelValue","updated"],setup(){const{currentTeam:e}=O();return{currentTeam:e}},data(){return{form:null,isLoading:!1}},methods:{activate(){this.form=this.$inertia.form({name:this.folder.name})},close(){this.$emit("update:modelValue")},save(){this.form.patch(this.route("team-folder.update",[this.currentTeam,this.folder]),{onSuccess:()=>{this.$emit("updated",{id:this.folder.id}),this.form.reset(),this.close()}})}}}),zt={class:"flex"},Wt={class:"relative mt-8 flex w-full items-center justify-end"};function jt(e,a,l,g,h,T){const u=n("JetLabel"),c=n("BaseInput"),v=n("BaseButtonSolid"),M=n("BaseForm"),b=n("BaseModal");return s(),y(b,{"model-value":e.modelValue,width:"lg","onUpdate:modelValue":a[1]||(a[1]=f=>e.$emit("update:modelValue",f)),onBeforeOpen:e.activate,onKeydown:ee(e.save,["enter"])},{title:r(()=>[p(" Rename folder ")]),content:r(()=>[t("div",zt,[i(M,{class:"w-full space-y-6"},{default:r(()=>[t("div",null,[i(u,{for:"name",value:"Folder name"}),i(c,{id:"name",modelValue:e.form.name,"onUpdate:modelValue":a[0]||(a[0]=f=>e.form.name=f),type:"text",class:"mt-1 block w-full",required:"",error:e.form.errors.name},null,8,["modelValue","error"])]),t("div",Wt,[i(v,{"is-loading":e.form.processing,class:D({"opacity-25":e.form.processing}),disabled:e.form.processing,onClick:e.save},{default:r(()=>[p(" Save ")]),_:1},8,["is-loading","class","disabled","onClick"])])]),_:1})])]),_:1},8,["model-value","onBeforeOpen","onKeydown"])}const qt=V(Ht,[["render",jt]]);const Yt=B({props:{modelValue:{type:String,required:!0,default:null},options:{type:Array,required:!0,default:()=>[]}},emits:["update:modelValue"],methods:{selectOption(e){this.$emit("update:modelValue",e)}}}),Jt=e=>(ue("data-v-a3d1355f"),e=e(),ce(),e),Qt={class:"flex items-center justify-center text-center",style:{margin:"0 -5px"}},Kt=["onClick"],Zt={class:"btn-group-tick absolute grow-0 text-xs text-indigo-600"},Xt=Jt(()=>t("svg",{class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1)),ea=[Xt],ta={class:"pl-2 text-center"},aa={class:"mt-1"};function sa(e,a,l,g,h,T){return s(),o("div",Qt,[(s(!0),o(R,null,H(e.options,u=>(s(),o("div",{key:u.value,style:{margin:"0 5px"},class:D(["option-button relative flex w-1/2 cursor-pointer flex-col rounded-lg border-2",{"border-indigo-500 bg-indigo-50":u.value===e.modelValue,"border-gray-200 bg-white":u.value!==e.modelValue}]),onClick:q(c=>e.selectOption(u.value),["stop"])},[F(t("span",Zt,ea,512),[[K,u.value===e.modelValue]]),t("div",ta,[t("div",{class:D(["py-2 text-left text-sm font-semibold capitalize text-gray-800",{"text-indigo-800":u.value===e.modelValue}])},$(u.text),3),t("div",aa,[t("i",{class:D(["text-4xl",{[u.icon]:!0,"text-indigo-800 opacity-75":u.value===e.modelValue}])},null,2)])])],10,Kt))),128))])}const ia=V(Yt,[["render",sa],["__scopeId","data-v-a3d1355f"]]),G={[E.MYSQL]:{icon:"icon-mysql",text:"MySQL"},[E.PGSQL]:{icon:"icon-postgres",text:"PostgreSQL"},[E.SQLSRV]:{icon:"icon-mssql",text:"SQL Server"}},ra=B({components:{BaseSvgIcon:P,BaseButtonSolid:J,BaseForm:se,BaseInput:te,JetLabel:ae,JetActionMessage:_e,BaseModal:Y,LabelPro:ve,BaseButtonGroup:ia,VTooltip:Ie},props:{modelValue:{type:Boolean,default:!1,required:!0},folder:{type:Object,default:()=>{},required:!1}},emits:["update:modelValue"],setup(){const{currentTeam:e}=O();return{currentTeam:e}},data(){return{form:null,diagram:null,selectedFolder:null,isLoading:!1,driverOptions:[{value:E.MYSQL,text:G[E.MYSQL].text,icon:G[E.MYSQL].icon},{value:E.PGSQL,text:G[E.PGSQL].text,icon:G[E.PGSQL].icon},{value:E.SQLSRV,text:G[E.SQLSRV].text,icon:G[E.SQLSRV].icon}]}},computed:{canCreatePrivateDiagrams(){return this.currentTeam?this.currentTeam.cans.can_create_private_diagrams:!1},StatamicUrls(){return ye}},methods:{activate(){this.selectedFolder=this.folder??null;const e={name:"",description:"",is_private:this.canCreatePrivateDiagrams,driver:E.MYSQL};this.selectedFolder&&Object.assign(e,{folder_id:this.selectedFolder.id}),this.form=this.$inertia.form(e)},save(){this.form.post(this.route("team-diagram.store",this.currentTeam))}}}),oa={class:"flex space-x-4"},na=t("div",{class:"w-4/12 rounded bg-gray-100 p-4 text-xl"},[t("h3",{class:"text-base font-bold leading-6 text-gray-900"}," Diagram settings "),t("p",{class:"leading-2 mt-1 text-xs text-gray-500"}," Configure your new database diagram. The database type cannot be changed once the diagram has been created. ")],-1),la={class:"w-8/12 pt-4"},da={key:0,class:"mt-1 flex items-start border-l-4 border-transparent text-sm font-medium leading-5 text-gray-900 transition duration-150 ease-in-out hover:text-gray-900 focus:bg-gray-50 focus:text-gray-900 focus:outline-none"},ma=["src"],ua={class:"text-md break-all font-extrabold uppercase tracking-wider text-gray-500"},ca={key:0,class:"mx-0.5 font-bold text-gray-400"},fa={key:1,class:"text-md font-extrabold uppercase tracking-wider text-gray-500"},pa={class:"flex items-center"},ha=["href"],ga={class:"mt-1"},va={class:"flex"},ya={class:"inline-flex w-1/2 items-center"},_a=t("span",{class:"ml-2"},"Public",-1),wa={class:"inline-flex w-1/2 items-center"},ba=["disabled"],Ta={class:"mt-1"},Ma={class:"relative mt-8 flex w-full items-center justify-end"};function $a(e,a,l,g,h,T){const u=n("JetLabel"),c=n("BaseInput"),v=n("BaseSvgIcon"),M=n("LabelPro"),b=n("BaseButtonGroup"),f=n("JetActionMessage"),C=n("BaseButtonSolid"),z=n("BaseForm"),W=n("BaseModal");return s(),y(W,{"model-value":e.modelValue,"onUpdate:modelValue":a[4]||(a[4]=x=>e.$emit("update:modelValue",x)),onBeforeOpen:e.activate,onKeydown:ee(e.save,["enter"])},{title:r(()=>[p(" New database diagram ")]),content:r(()=>[t("div",oa,[na,t("div",la,[i(z,{class:"space-y-6"},{default:r(()=>[t("div",null,[i(u,{for:"team_folder",value:e.selectedFolder?"Folder":"Team"},null,8,["value"]),e.currentTeam?(s(),o("div",da,[t("img",{src:e.currentTeam.logo_url,class:"-ml-1 mr-2 h-5 w-5 shrink-0 text-gray-400 transition duration-150 ease-in-out"},null,8,ma),t("div",ua,[p($(e.currentTeam.name)+" ",1),e.selectedFolder?(s(),o("span",ca,"/")):d("",!0),e.selectedFolder?(s(),o("span",fa,$(e.selectedFolder.name),1)):d("",!0)])])):d("",!0)]),t("div",null,[i(u,{for:"name",value:"Diagram name"}),i(c,{id:"name",modelValue:e.form.name,"onUpdate:modelValue":a[0]||(a[0]=x=>e.form.name=x),type:"text",class:"mt-1 block w-full",required:"",error:e.form.errors.name},null,8,["modelValue","error"])]),t("div",null,[t("div",pa,[i(u,{for:"is_private",value:"Diagram visibility"}),t("a",{href:e.StatamicUrls["2b126c44-1119-4def-83fd-7c411c3a34a3"],target:"_blank"},[i(v,{size:"1.2",class:"ml-1 text-gray-400",icon:"heroicons/v2-outline/information-circle"})],8,ha)]),t("div",ga,[t("div",va,[t("label",ya,[F(t("input",{"onUpdate:modelValue":a[1]||(a[1]=x=>e.form.is_private=x),type:"radio",class:"form-radio text-indigo-500",name:"is_private",value:!1},null,512),[[X,e.form.is_private]]),_a]),t("label",wa,[F(t("input",{"onUpdate:modelValue":a[2]||(a[2]=x=>e.form.is_private=x),type:"radio",class:"form-radio text-indigo-500",name:"is_private",disabled:!e.canCreatePrivateDiagrams,value:!0},null,8,ba),[[X,e.form.is_private]]),t("span",{class:D(["ml-2",{"text-gray-500":!e.canCreatePrivateDiagrams}])},"Private",2),e.currentTeam?(s(),y(M,{key:0,"key-for-access":"can_create_private_diagrams",team:e.currentTeam},null,8,["team"])):d("",!0)])])])]),t("div",null,[i(u,{for:"databaseType",value:"Database type"}),t("div",Ta,[i(b,{id:"databaseType",modelValue:e.form.driver,"onUpdate:modelValue":a[3]||(a[3]=x=>e.form.driver=x),options:e.driverOptions},null,8,["modelValue","options"])])]),t("div",Ma,[i(f,{on:e.form.wasSuccessful&&!e.form.isDirty},{default:r(()=>[p(" Diagram created. Redirecting... ")]),_:1},8,["on"]),i(C,{class:D({"opacity-25":e.form.processing}),disabled:e.form.processing,onClick:e.save},{default:r(()=>[p(" Create diagram ")]),_:1},8,["class","disabled","onClick"])])]),_:1})])])]),_:1},8,["model-value","onBeforeOpen","onKeydown"])}const Sa=V(ra,[["render",$a]]),Da=B({components:{BaseSpinner:fe,BaseSvgIcon:P,BaseButtonSolid:J,BaseForm:se,BaseTextArea:Re,BaseInput:te,JetLabel:ae,JetActionMessage:_e,BaseModal:Y,LabelPro:ve},props:{modelValue:{type:Boolean,default:!1,required:!0},diagram:{type:Object,default:()=>{},required:!1}},emits:["update:modelValue","updated"],setup(){const{currentTeam:e}=O();return{currentTeam:e}},data(){return{form:null,isLoading:!1,diagramAccess:{canManageDiagram:!1},isDiagramAccessLoaded:!1}},computed:{canCreatePrivateDiagrams(){return this.currentTeam?this.currentTeam.cans.can_create_private_diagrams:!1},StatamicUrls(){return ye}},methods:{async activate(){this.isDiagramAccessLoaded=!1,this.form=this.$inertia.form({name:this.diagram.name,description:this.diagram.description,is_private:this.diagram.is_private});try{const e=await axios.get(`/api/diagrams/${this.diagram.id}/my-access`);this.diagramAccess=e.data.data}catch(e){console.error(e)}finally{this.isDiagramAccessLoaded=!0}},close(){this.$emit("update:modelValue")},save(){this.form.patch(this.route("team-diagram.update",[this.currentTeam,this.diagram]),{onSuccess:()=>{this.$emit("updated"),this.form.reset(),this.close()}})}}}),xa={class:"flex space-x-4"},Ea=t("div",{class:"w-4/12 rounded bg-gray-100 p-4 text-xl"},[t("h3",{class:"text-base font-bold leading-6 text-gray-900"}," Diagram settings "),t("p",{class:"leading-2 mt-1 text-sm text-gray-500"}," Update metadata and visibility settings for the diagram. ")],-1),Ba={class:"w-8/12 pt-4"},ka={class:"flex items-center"},Aa=["href"],Va={class:"mt-1"},Ca={key:1,class:"flex"},Ia={class:"inline-flex w-1/2 items-center"},Fa=t("span",{class:"ml-2"},"Public",-1),La={class:"inline-flex w-1/2 items-center"},Ra=["disabled"],Oa={key:0,class:"flex items-center font-medium text-yellow-500"},Pa={key:1,class:"flex items-center font-medium text-green-500"},Ga={class:"relative mt-8 flex w-full items-center justify-end space-x-2"};function Ua(e,a,l,g,h,T){const u=n("JetLabel"),c=n("BaseInput"),v=n("BaseTextArea"),M=n("BaseSvgIcon"),b=n("BaseSpinner"),f=n("LabelPro"),C=n("JetActionMessage"),z=n("BaseButtonSolid"),W=n("BaseForm"),x=n("BaseModal");return s(),y(x,{"model-value":e.modelValue,"onUpdate:modelValue":a[4]||(a[4]=k=>e.$emit("update:modelValue",k)),onBeforeOpen:e.activate},{title:r(()=>[p(" Edit database diagram ")]),content:r(()=>[t("div",xa,[Ea,t("div",Ba,[i(W,{class:"space-y-6"},{default:r(()=>[t("div",null,[i(u,{for:"name",value:"Diagram name"}),i(c,{id:"name",modelValue:e.form.name,"onUpdate:modelValue":a[0]||(a[0]=k=>e.form.name=k),type:"text",class:"mt-1 block w-full",required:"",error:e.form.errors.name},null,8,["modelValue","error"])]),t("div",null,[i(u,{for:"description",value:"Description"}),i(v,{id:"description",modelValue:e.form.description,"onUpdate:modelValue":a[1]||(a[1]=k=>e.form.description=k),rows:"3",type:"text",class:"mt-1 block w-full",required:"",error:e.form.errors.description},null,8,["modelValue","error"])]),t("div",null,[t("div",ka,[i(u,{for:"is_private",value:"Diagram visibility"}),t("a",{href:e.StatamicUrls["2b126c44-1119-4def-83fd-7c411c3a34a3"],target:"_blank"},[i(M,{size:"1.2",class:"ml-1 text-gray-400",icon:"heroicons/v2-outline/information-circle"})],8,Aa)]),t("div",Va,[e.isDiagramAccessLoaded?d("",!0):(s(),y(b,{key:0,class:"text-gray-500"})),e.isDiagramAccessLoaded?(s(),o("div",Ca,[e.diagramAccess.canManageDiagram?(s(),o(R,{key:0},[t("label",Ia,[F(t("input",{"onUpdate:modelValue":a[2]||(a[2]=k=>e.form.is_private=k),type:"radio",class:"form-radio text-indigo-500",name:"is_private",value:!1},null,512),[[X,e.form.is_private]]),Fa]),t("label",La,[F(t("input",{"onUpdate:modelValue":a[3]||(a[3]=k=>e.form.is_private=k),type:"radio",class:"form-radio text-indigo-500",name:"is_private",disabled:!e.canCreatePrivateDiagrams||!e.diagramAccess.canManageDiagram,value:!0},null,8,Ra),[[X,e.form.is_private]]),t("span",{class:D(["ml-2",{"text-gray-500":!e.canCreatePrivateDiagrams}])},"Private",2),e.currentTeam?(s(),y(f,{key:0,"key-for-access":"can_create_private_diagrams",team:e.currentTeam},null,8,["team"])):d("",!0)])],64)):(s(),o(R,{key:1},[e.form.is_private?d("",!0):(s(),o("div",Oa,[i(M,{class:"mr-1",icon:"heroicons/v2-outline/globe-asia-australia"}),p("Public ")])),e.form.is_private?(s(),o("div",Pa,[i(M,{class:"mr-1",icon:"heroicons/v2-outline/eye-slash"}),p("Private ")])):d("",!0)],64))])):d("",!0)])]),t("div",Ga,[i(C,{on:e.form.wasSuccessful&&!e.form.isDirty},{default:r(()=>[p(" Diagram updated. ")]),_:1},8,["on"]),i(z,{class:D({"opacity-25":e.form.processing}),disabled:e.form.processing,onClick:e.save},{default:r(()=>[p(" Save ")]),_:1},8,["class","disabled","onClick"])])]),_:1})])])]),_:1},8,["model-value","onBeforeOpen"])}const Na=V(Da,[["render",Ua]]);function Ha(e,a,l){var g=-1,h=e.length;a<0&&(a=-a>h?0:h+a),l=l>h?h:l,l<0&&(l+=h),h=a>l?0:l-a>>>0,a>>>=0;for(var T=Array(h);++g<h;)T[g]=e[g+a];return T}var za=Ha,Wa=za,ja=Fe,qa=Ve,Ya=Math.ceil,Ja=Math.max;function Qa(e,a,l){(l?ja(e,a,l):a===void 0)?a=1:a=Ja(qa(a),0);var g=e==null?0:e.length;if(!g||a<1)return[];for(var h=0,T=0,u=Array(Ya(g/a));h<g;)u[T++]=Wa(e,h,h+=a);return u}var Ka=Qa;const Za=Be(Ka),Xa={class:"inline-flex items-center rounded-md bg-indigo-50 px-1.5 py-0.5 text-xs font-medium capitalize text-indigo-700 ring-1 ring-inset ring-indigo-700/10"},de={__name:"LabelTeamRole",props:{role:{type:String,default:"",required:!0}},setup(e){return(a,l)=>(s(),o("span",Xa,$(e.role),1))}},es={key:0,class:"group mb-2 block w-full flex-shrink-0 rounded-md py-2 px-4"},ts={class:"relative flex items-center"},as=["src"],ss={class:"ml-3 text-left"},is={class:"text-sm font-semibold text-gray-700 group-hover:text-gray-900"},rs={class:"group mb-2 block w-full flex-shrink-0 rounded-md py-2 px-4 hover:bg-gray-100"},os={class:"relative flex items-center"},ns=["src"],ls={class:"ml-3 text-left"},ds={class:"text-sm font-semibold text-gray-700 group-hover:text-gray-900"},ms=t("div",{class:"block px-4 py-2 text-xs font-semibold uppercase text-gray-400"}," Switch teams ",-1),us=["onSubmit"],cs={class:"flex items-center justify-between"},fs={key:0,class:"mr-2 h-5 w-5 text-green-400",fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",stroke:"currentColor",viewBox:"0 0 24 24"},ps=t("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),hs=[ps],gs={__name:"TeamSwitcher",emits:["team-changed"],setup(e,{emit:a}){const{currentTeam:l}=O(),g=L(()=>ne(N().props.auth.user.all_teams)+ne(N().props.auth.user.guest_teams)>1),h=L(()=>Me(N().props.auth.user.all_teams,N().props.auth.user.guest_teams)),T=L(()=>{var M;const v=Z(h,{id:l.id});return v?(M=v.membership)==null?void 0:M.role:null}),u=a,c=v=>{ke.put(route("current-team.update"),{team_id:v},{preserveState:!1}),u("team-changed",v)};return(v,M)=>(s(),o("div",null,[g.value?(s(),y(we,{key:1,placement:"bottom-start",strategy:"fixed",offset:0},{trigger:r(()=>{var b,f;return[t("button",rs,[t("div",os,[t("div",null,[t("img",{class:"inline-block h-9 w-9 rounded-full",src:A(l).logo_url,alt:""},null,8,ns)]),t("div",ls,[t("p",ds,$(A(l).name),1),"is_guest_team"in A(l)&&A(l).is_guest_team?(s(),y(oe,{key:0})):d("",!0),(f=(b=A(l))==null?void 0:b.membership)!=null&&f.role?(s(),y(de,{key:1,role:A(l).membership.role},null,8,["role"])):d("",!0)]),i(P,{class:"absolute right-0 ml-0.5 group-hover:text-indigo-600",icon:"heroicons/v2-outline/chevron-up-down",size:1.5})])])]}),content:r(()=>[ms,(s(!0),o(R,null,H(h.value,b=>(s(),o("form",{key:b.id,onSubmit:q(f=>c(b.id),["prevent"])},[i(A(Oe),null,{default:r(({active:f})=>[i(Pe,{as:"button",class:D({"bg-gray-100":f})},{default:r(()=>[t("div",cs,[t("div",{class:D(["flex items-center",{"font-bold":b.id==v.$page.props.auth.user.current_team_id}])},[p($(b.name)+" ",1),"is_guest_team"in b&&b.is_guest_team?(s(),y(oe,{key:0,class:"ml-1.5"})):d("",!0)],2),b.id==v.$page.props.auth.user.current_team_id?(s(),o("svg",fs,hs)):d("",!0)])]),_:2},1032,["class"])]),_:2},1024)],40,us))),128))]),_:1})):(s(),o("div",es,[t("div",ts,[t("div",null,[t("img",{class:"inline-block h-9 w-9 rounded-full",src:A(l).logo_url,alt:""},null,8,as)]),t("div",ss,[t("p",is,$(A(l).name),1),"is_guest_team"in A(l)&&A(l).is_guest_team?(s(),y(oe,{key:0})):d("",!0),T.value?(s(),y(de,{key:1,role:T.value},null,8,["role"])):d("",!0)])])]))]))}};const I={LOADING:"state-loading",EMPTY:"state-empty",LOADED:"state-loaded"},w={FAVORITES:"view-favorites",TEAM_DIAGRAMS:"view-team-diagrams",TEAM_MY_DIAGRAMS:"view-my-diagrams",TEAM_SHARED_WITH_ME_DIAGRAMS:"view-shared-with-me-diagrams",TEAM_FOLDER:"view-team-folder"},vs=B({components:{TeamSwitcher:gs,BaseMenu:we,BaseListboxDataDriven:Le,BaseButtonSolid:J,BasePopover:pe,ModalDiagramCreate:Sa,ModalDiagramEdit:Na,ModalFolderCreate:Nt,ModalFolderEdit:qt,DiagramCard:kt,DiagramIndexSidenavItem:Ct,BaseModalConfirm:Rt,BaseSvgIcon:P,ContentLoader:Ge},setup(){const{currentTeam:e,currentTeamHasPermission:a,hasMaxSeatsOfOne:l}=O(),g=me("emitter");return{currentTeam:e,currentTeamHasPermission:a,emitter:g,hasMaxSeatsOfOne:l}},data(){return{diagrams:[],foldersByTeamId:{},editingDiagram:null,deletingDiagram:null,deletingFolder:null,isDeleting:null,state:I.LOADING,view:{name:null,teamId:null,folder:null},isModalDiagramCreateShown:!1,isModalDiagramEditShown:!1,isModalFolderCreateShown:!1,isModalFolderEditShown:!1,isBaseModalConfirmShown:!1,createInFolder:null,sortBy:"blueprint_updated_at_relative",sortOptions:[{text:"Date created",value:"blueprint_created_at_relative"},{text:"Date updated",value:"blueprint_updated_at_relative"},{text:"Alphabetical",value:"name"}]}},computed:{isCurrentTeamAGuestTeam(){return"is_guest_team"in this.currentTeam&&this.currentTeam.is_guest_team},displayedDiagrams(){let e=[];switch(this.view.name){case w.FAVORITES:e=this.favoritedDiagrams;break;case w.TEAM_FOLDER:e=this.diagramsForFolder(this.view.folder.id);break;case w.TEAM_DIAGRAMS:e=this.diagramsForTeam(this.view.teamId);break;case w.TEAM_MY_DIAGRAMS:e=this.diagramsForTeam(this.currentTeam.id).filter(a=>a.owner_id===this.$page.props.auth.user.id);break;case w.TEAM_SHARED_WITH_ME_DIAGRAMS:e=this.teamSharedWithMeDiagrams();break;default:e=this.diagrams}switch(this.sortBy){case"blueprint_created_at_relative":return _.orderBy(e,["blueprint_created_at","blueprint_updated_at"],["desc","desc"]);case"blueprint_updated_at_relative":return _.orderBy(e,["blueprint_updated_at","blueprint_created_at"],["desc","desc"]);case"name":return _.orderBy(e,[a=>a.name.toLowerCase(),"blueprint_updated_at","blueprint_created_at"],["asc","desc","desc"]);default:return e}},favoritedDiagrams(){return _.filter(this.diagrams,"is_favorited")},viewTitle(){if(!this.view.name)return"";switch(this.view.name){case w.FAVORITES:return"My favorites";case w.TEAM_DIAGRAMS:return"All team diagrams";case w.TEAM_FOLDER:return this.view.folder.name;case w.TEAM_MY_DIAGRAMS:return"My diagrams";case w.TEAM_SHARED_WITH_ME_DIAGRAMS:return"Shared with me";default:return"Diagrams"}},customEmptyTitle(){return this.view.name===w.FAVORITES?"No favorite diagrams":this.view.name===w.TEAM_FOLDER?"No diagrams in folder":"No diagrams"},customEmptyText(){return this.view.name===w.FAVORITES?"Tag a diagram as favorite to get started.":this.view.name===w.TEAM_FOLDER?"This folder is empty, or you might not have permission to access diagrams in this folder.":null},confirmDeleteTitle(){return this.deletingDiagram?"Delete Diagram":this.deletingFolder?"Delete Folder?":""},confirmDeleteText(){return this.deletingDiagram?`Are you sure you want to delete this diagram [${this.deletingDiagram.name}]? This action cannot be undone.`:this.deletingFolder?"Diagrams within the folder will remain but will no longer belong to any folder.":""}},created(){this.STATES=I,this.VIEWS=w,this.ROLE_PERMISSIONS=he},async mounted(){await this.activate()},methods:{isUserAGuestInThisTeam(){return Z(N().props.auth.user.all_teams,{id:this.currentTeam.id})===void 0},async activate(){const e=new URLSearchParams(window.location.search);for(const a of e.keys())if(a.includes("new")){if(this.isUserAGuestInThisTeam()){this.$inertia.put(this.route("current-team.update"),{team_id:N().props.auth.user.all_teams[0].id,new:!0},{preserveState:!1});return}this.showCreateDiagramModal()}await Promise.all([this.loadFolders(),this.loadDiagrams()]),this.view.name||this.setDefaultView(),await this.loadDiagramThumbnails()},teamSharedWithMeDiagrams(){return this.diagramsForTeam(this.currentTeam.id).filter(e=>e.owner_id!==this.$page.props.auth.user.id)},async loadDiagrams(){let e;this.isCurrentTeamAGuestTeam?e=await axios.get(`/api/guest-teams/${this.currentTeam.slug}/diagrams`):e=await axios.get(`/api/teams/${this.currentTeam.slug}/diagrams`),this.diagrams=e.data.data},async loadDiagramThumbnails(){const e=this.diagrams.map(a=>a.id);Za(e,10).forEach(a=>{this.loadDiagramThumbnailsChunk(a)})},async loadDiagramThumbnailsChunk(e){let a;this.isCurrentTeamAGuestTeam?a=await axios.get(`/api/guest-teams/${this.currentTeam.slug}/diagram-thumbnails?filter[id]=${e.join(",")}`):a=await axios.get(`/api/teams/${this.currentTeam.slug}/diagram-thumbnails?filter[id]=${e.join(",")}`);const l=a.data.data;this.diagrams.forEach(g=>{const h=Z(l,{id:g.id});h&&(g.blueprint_thumbnail_url=h.blueprint_thumbnail_url)})},async loadFolders(){if(this.isCurrentTeamAGuestTeam)return;const e=await axios.get(`api/teams/${this.currentTeam.slug}/folders`);this.foldersByTeamId[this.currentTeam.id]=e.data.data},favorited(e){e.is_favorited=!0},unfavorited(e){e.is_favorited=!1,this.view.name===w.FAVORITES&&this.displayedDiagrams.length===0&&(this.state=I.EMPTY)},async movedToFolder(){await this.loadDiagrams(),this.view.name===w.TEAM_FOLDER&&this.displayedDiagrams.length===0&&(this.state=I.EMPTY)},diagramsForTeam(e){return _.filter(this.diagrams,{team_id:e})},diagramsForFolder(e){return _.filter(this.diagrams,{folder_id:e})},setView(e,a=null,l=null,g=1e3){this.state=I.LOADING,this.view={name:e,teamId:a,folder:l},this.displayedDiagrams.length===0?setTimeout(()=>this.state=I.EMPTY,g):setTimeout(()=>this.state=I.LOADED,g)},setDefaultView(){this.setView(w.TEAM_DIAGRAMS,this.currentTeam.id),this.isCurrentTeamAGuestTeam?this.setTeamSharedWithMeView(this.currentTeam.id):this.hasMaxSeatsOfOne?this.setTeamMyDiagramsView(this.currentTeam.id):this.setTeamView(this.currentTeam.id)},setTeamView(e,a=1e3){this.setView(w.TEAM_DIAGRAMS,e,null,a)},setTeamMyDiagramsView(e,a=1e3){this.setView(w.TEAM_MY_DIAGRAMS,e,null,a)},setTeamSharedWithMeView(e,a=1e3){this.setView(w.TEAM_SHARED_WITH_ME_DIAGRAMS,e,null,a)},setFolderView(e,a=1e3){this.setView(w.TEAM_FOLDER,e.team_id,e,a)},setFavoritesView(){this.setView(w.FAVORITES)},confirmDeleteDiagram(e,a){this.$refs.diagramCards[a].focus(),this.deletingDiagram=e,this.isBaseModalConfirmShown=!0},confirmDeleteFolder(){this.deletingFolder=this.view.folder,this.isBaseModalConfirmShown=!0},async folderCreated({name:e}){const a=Object.assign({},this.currentTeam);this.state=I.LOADING;try{await Promise.all([this.loadDiagrams(),this.loadFolders()]);const l=Z(this.foldersByTeamId[a.id],{name:e});this.setFolderView(l,0)}catch{this.emitter.emit("toast-error","Could not refresh folders."),this.state=I.LOADED}},async folderEdited({id:e}){try{await this.loadFolders();const a=_.find(this.foldersByTeamId[this.currentTeam.id],{id:e});this.setFolderView(a,0)}catch{this.emitter.emit("toast-error","Could not refresh folder.")}},onConfirmDelete(){this.deletingDiagram&&this.deleteDiagram(),this.deletingFolder&&this.deleteFolder()},async deleteDiagram(){this.isDeleting=!0,this.$inertia.delete(this.route("team-diagram.destroy",[this.currentTeam,this.deletingDiagram]),{onSuccess:async()=>{await this.loadDiagrams(),this.isBaseModalConfirmShown=!1},onFinish:()=>{this.deletingDiagram=null,this.isDeleting=!1}})},async deleteFolder(){this.isDeleting=!0,this.$inertia.delete(this.route("team-folder.destroy",[this.currentTeam,this.deletingFolder]),{onSuccess:async()=>{await Promise.all([this.loadFolders(),this.loadDiagrams()]),this.isBaseModalConfirmShown=!1,this.setTeamView(this.currentTeam.id,0)},onFinish:()=>{this.deletingFolder=null,this.isDeleting=!1}})},showCreateDiagramModal(){this.createInFolder=this.view.folder?this.view.folder:null,this.isModalDiagramCreateShown=!0},showEditDiagramModal(e,a){this.$refs.diagramCards[a].focus(),this.editingDiagram=e,this.isModalDiagramEditShown=!0},showNewFolderModal(){this.isModalFolderCreateShown=!0},showEditFolderModal(){this.isModalFolderEditShown=!0}}}),S=e=>(ue("data-v-77021e07"),e=e(),ce(),e),ys={class:"dsDiagramIndex"},_s={class:"relative"},ws={class:"mx-auto max-w-7xl px-4 pb-6 sm:px-6 lg:px-8 lg:pb-16"},bs={class:"overflow-hidden rounded-lg bg-white shadow"},Ts={class:"divide-y divide-gray-300 lg:grid lg:grid-cols-12 lg:divide-x lg:divide-y-0"},Ms={class:"pb-8 pt-6 lg:col-span-3"},$s={class:"space-y-0.5"},Ss={class:"px-2"},Ds={class:"mx-2 space-y-0.5 rounded"},xs=S(()=>t("span",{class:"truncate"},"All team diagrams",-1)),Es=S(()=>t("span",{class:"truncate"},"My diagrams",-1)),Bs=S(()=>t("span",{class:"truncate"},"Shared with me",-1)),ks={key:2,class:"space-y-0.5"},As=["title","onClick"],Vs={class:"truncate"},Cs=S(()=>t("span",{class:"truncate"}," Create new folder ",-1)),Is=S(()=>t("div",null,[t("hr",{class:"my-2 border-gray-300"})],-1)),Fs={class:"mx-2 space-y-0.5 rounded"},Ls=S(()=>t("svg",{class:"ml-1 inline-flex h-4 w-4 shrink-0 transition duration-150 ease-in-out",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})],-1)),Rs={class:"p-8 lg:col-span-9"},Os={class:"mb-2 flex items-center justify-between pb-2"},Ps={class:"leading-normal"},Gs={class:"flex items-center space-x-2"},Us={class:"mb-0 text-2xl font-semibold leading-6 text-gray-700"},Ns={title:"More actions",type:"button",class:"inline-flex items-center rounded-lg px-1 py-2 text-sm font-medium text-gray-800 hover:bg-gray-100 focus:outline-none"},Hs=S(()=>t("svg",{class:"mr-3 h-5 w-5 text-gray-400 group-hover:text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[t("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"}),t("path",{"fill-rule":"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z","clip-rule":"evenodd"})],-1)),zs=S(()=>t("svg",{class:"mr-3 h-5 w-5 text-gray-400 group-hover:text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[t("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)),Ws={class:"flex items-center space-x-2"},js={class:"flex items-center"},qs=S(()=>t("div",{class:"text-sm font-semibold text-gray-400"},"Sort:",-1)),Ys={class:"mx-auto grid max-w-lg gap-5 lg:max-w-none lg:grid-cols-3"},Js=S(()=>t("rect",{x:"-100",y:"-10",rx:"2",ry:"2",width:"500",height:"202"},null,-1)),Qs=S(()=>t("rect",{x:"24",y:"210",rx:"2",ry:"2",width:"200",height:"25"},null,-1)),Ks=S(()=>t("rect",{x:"24",y:"255",rx:"2",ry:"2",width:"90",height:"13"},null,-1)),Zs=S(()=>t("rect",{x:"120",y:"250",rx:"2",ry:"2",width:"60",height:"22"},null,-1)),Xs={class:"mx-auto grid max-w-lg gap-5 lg:max-w-none lg:grid-cols-3"},ei={key:0,class:"flex items-center justify-center rounded-lg bg-gray-100 p-24"},ti={class:"flex max-w-sm flex-col items-center justify-center"},ai=S(()=>t("svg",{id:"aa03ddf9-f8f2-4819-a4ce-be9b0a220741","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",width:"200",height:"150",viewBox:"0 0 1119.60911 699"},[t("title",null,"server down"),t("circle",{cx:"292.60911",cy:"213",r:"213",fill:"#f2f2f2"}),t("path",{d:"M31.39089,151.64237c0,77.49789,48.6181,140.20819,108.70073,140.20819",transform:"translate(-31.39089 -100.5)",fill:"#2f2e41"}),t("path",{d:"M140.09162,291.85056c0-78.36865,54.255-141.78356,121.30372-141.78356",transform:"translate(-31.39089 -100.5)",fill:"#7886d7"}),t("path",{d:"M70.77521,158.66768c0,73.61476,31.00285,133.18288,69.31641,133.18288",transform:"translate(-31.39089 -100.5)",fill:"#7886d7"}),t("path",{d:"M140.09162,291.85056c0-100.13772,62.7103-181.16788,140.20819-181.16788",transform:"translate(-31.39089 -100.5)",fill:"#2f2e41"}),t("path",{d:"M117.22379,292.83905s15.41555-.47479,20.06141-3.783,23.713-7.2585,24.86553-1.95278,23.16671,26.38821,5.76263,26.5286-40.43935-2.711-45.07627-5.53549S117.22379,292.83905,117.22379,292.83905Z",transform:"translate(-31.39089 -100.5)",fill:"#a8a8a8"}),t("path",{d:"M168.224,311.78489c-17.40408.14042-40.43933-2.71094-45.07626-5.53548-3.53126-2.151-4.93843-9.86945-5.40926-13.43043-.32607.014-.51463.02-.51463.02s.97638,12.43276,5.61331,15.2573,27.67217,5.67589,45.07626,5.53547c5.02386-.04052,6.7592-1.82793,6.66391-4.47526C173.87935,310.756,171.96329,311.75474,168.224,311.78489Z",transform:"translate(-31.39089 -100.5)",opacity:"0.2"}),t("ellipse",{cx:"198.60911",cy:"424.5",rx:"187",ry:"25.43993",fill:"#3f3d56"}),t("ellipse",{cx:"198.60911",cy:"424.5",rx:"157",ry:"21.35866",opacity:"0.1"}),t("ellipse",{cx:"836.60911",cy:"660.5",rx:"283",ry:"38.5",fill:"#3f3d56"}),t("ellipse",{cx:"310.60911",cy:"645.5",rx:"170",ry:"23.12721",fill:"#3f3d56"}),t("path",{d:"M494,726.5c90,23,263-30,282-90",transform:"translate(-31.39089 -100.5)",fill:"none",stroke:"#2f2e41","stroke-miterlimit":"10","stroke-width":"2"}),t("path",{d:"M341,359.5s130-36,138,80-107,149-17,172",transform:"translate(-31.39089 -100.5)",fill:"none",stroke:"#2f2e41","stroke-miterlimit":"10","stroke-width":"2"}),t("path",{d:"M215.40233,637.78332s39.0723-10.82,41.47675,24.04449-32.15951,44.78287-5.10946,51.69566",transform:"translate(-31.39089 -100.5)",fill:"none",stroke:"#2f2e41","stroke-miterlimit":"10","stroke-width":"2"}),t("path",{d:"M810.09554,663.73988,802.218,714.03505s-38.78182,20.60284-11.51335,21.20881,155.73324,0,155.73324,0,24.84461,0-14.54318-21.81478l-7.87756-52.719Z",transform:"translate(-31.39089 -100.5)",fill:"#2f2e41"}),t("path",{d:"M785.21906,734.69812c6.193-5.51039,16.9989-11.252,16.9989-11.252l7.87756-50.2952,113.9216.10717,7.87756,49.582c9.185,5.08711,14.8749,8.987,18.20362,11.97818,5.05882-1.15422,10.58716-5.44353-18.20362-21.38921l-7.87756-52.719-113.9216,3.02983L802.218,714.03506S769.62985,731.34968,785.21906,734.69812Z",transform:"translate(-31.39089 -100.5)",opacity:"0.1"}),t("rect",{x:"578.43291",y:"212.68859",width:"513.25314",height:"357.51989",rx:"18.04568",fill:"#2f2e41"}),t("rect",{x:"595.70294",y:"231.77652",width:"478.71308",height:"267.83694",fill:"#3f3d56"}),t("circle",{cx:"835.05948",cy:"223.29299",r:"3.02983",fill:"#f2f2f2"}),t("path",{d:"M1123.07694,621.32226V652.6628a18.04341,18.04341,0,0,1-18.04568,18.04568H627.86949A18.04341,18.04341,0,0,1,609.8238,652.6628V621.32226Z",transform:"translate(-31.39089 -100.5)",fill:"#2f2e41"}),t("polygon",{points:"968.978 667.466 968.978 673.526 642.968 673.526 642.968 668.678 643.417 667.466 651.452 645.651 962.312 645.651 968.978 667.466",fill:"#2f2e41"}),t("path",{d:"M1125.828,762.03359c-.59383,2.539-2.83591,5.21743-7.90178,7.75032-18.179,9.08949-55.1429-2.42386-55.1429-2.42386s-28.4804-4.84773-28.4804-17.573a22.72457,22.72457,0,0,1,2.49658-1.48459c7.64294-4.04351,32.98449-14.02122,77.9177.42248a18.73921,18.73921,0,0,1,8.54106,5.59715C1125.07908,756.45353,1126.50669,759.15715,1125.828,762.03359Z",transform:"translate(-31.39089 -100.5)",fill:"#2f2e41"}),t("path",{d:"M1125.828,762.03359c-22.251,8.526-42.0843,9.1622-62.43871-4.975-10.26507-7.12617-19.59089-8.88955-26.58979-8.75618,7.64294-4.04351,32.98449-14.02122,77.9177.42248a18.73921,18.73921,0,0,1,8.54106,5.59715C1125.07908,756.45353,1126.50669,759.15715,1125.828,762.03359Z",transform:"translate(-31.39089 -100.5)",opacity:"0.1"}),t("ellipse",{cx:"1066.53846",cy:"654.13477",rx:"7.87756",ry:"2.42386",fill:"#f2f2f2"}),t("circle",{cx:"835.05948",cy:"545.66686",r:"11.51335",fill:"#f2f2f2"}),t("polygon",{points:"968.978 667.466 968.978 673.526 642.968 673.526 642.968 668.678 643.417 667.466 968.978 667.466",opacity:"0.1"}),t("rect",{x:"108.60911",y:"159",width:"208",height:"242",fill:"#2f2e41"}),t("rect",{x:"87.60911",y:"135",width:"250",height:"86",fill:"#3f3d56"}),t("rect",{x:"87.60911",y:"237",width:"250",height:"86",fill:"#3f3d56"}),t("rect",{x:"87.60911",y:"339",width:"250",height:"86",fill:"#3f3d56"}),t("rect",{x:"271.60911",y:"150",width:"16",height:"16",fill:"#7886d7",opacity:"0.4"}),t("rect",{x:"294.60911",y:"150",width:"16",height:"16",fill:"#7886d7",opacity:"0.8"}),t("rect",{x:"317.60911",y:"150",width:"16",height:"16",fill:"#7886d7"}),t("rect",{x:"271.60911",y:"251",width:"16",height:"16",fill:"#7886d7",opacity:"0.4"}),t("rect",{x:"294.60911",y:"251",width:"16",height:"16",fill:"#7886d7",opacity:"0.8"}),t("rect",{x:"317.60911",y:"251",width:"16",height:"16",fill:"#7886d7"}),t("rect",{x:"271.60911",y:"352",width:"16",height:"16",fill:"#7886d7",opacity:"0.4"}),t("rect",{x:"294.60911",y:"352",width:"16",height:"16",fill:"#7886d7",opacity:"0.8"}),t("rect",{x:"317.60911",y:"352",width:"16",height:"16",fill:"#7886d7"}),t("circle",{cx:"316.60911",cy:"538",r:"79",fill:"#2f2e41"}),t("rect",{x:"280.60911",y:"600",width:"24",height:"43",fill:"#2f2e41"}),t("rect",{x:"328.60911",y:"600",width:"24",height:"43",fill:"#2f2e41"}),t("ellipse",{cx:"300.60911",cy:"643.5",rx:"20",ry:"7.5",fill:"#2f2e41"}),t("ellipse",{cx:"348.60911",cy:"642.5",rx:"20",ry:"7.5",fill:"#2f2e41"}),t("circle",{cx:"318.60911",cy:"518",r:"27",fill:"#fff"}),t("circle",{cx:"318.60911",cy:"518",r:"9",fill:"#3f3d56"}),t("path",{d:"M271.36733,565.03228c-6.37889-28.56758,14.01185-57.43392,45.544-64.47477s62.2651,10.41,68.644,38.9776-14.51861,39.10379-46.05075,46.14464S277.74622,593.59986,271.36733,565.03228Z",transform:"translate(-31.39089 -100.5)",fill:"#7886d7"}),t("ellipse",{cx:"417.21511",cy:"611.34365",rx:"39.5",ry:"12.40027",transform:"translate(-238.28665 112.98044) rotate(-23.17116)",fill:"#2f2e41"}),t("ellipse",{cx:"269.21511",cy:"664.34365",rx:"39.5",ry:"12.40027",transform:"translate(-271.07969 59.02084) rotate(-23.17116)",fill:"#2f2e41"}),t("path",{d:"M394,661.5c0,7.732-19.90861,23-42,23s-43-14.268-43-22,20.90861-6,43-6S394,653.768,394,661.5Z",transform:"translate(-31.39089 -100.5)",fill:"#fff"})],-1)),si={class:"mb-2 mt-3 text-xl font-semibold text-indigo-900"},ii={key:0},ri={key:1},oi={key:0,class:"text-center"},ni={key:1,class:"text-center"},li={key:0},di={key:1},mi=S(()=>t("br",null,null,-1)),ui=S(()=>t("a",{href:"/templates",target:"_blank",class:"font-medium underline"},"clone an existing template",-1));function ci(e,a,l,g,h,T){const u=n("TeamSwitcher"),c=n("BaseSvgIcon"),v=n("DiagramIndexSidenavItem"),M=n("BasePopover"),b=n("BaseListboxDataDriven"),f=n("BaseButtonSolid"),C=n("ContentLoader"),z=n("DiagramCard"),W=n("ModalDiagramCreate"),x=n("ModalDiagramEdit"),k=n("BaseModalConfirm"),be=n("ModalFolderCreate"),Te=n("ModalFolderEdit");return s(),o("div",ys,[t("div",_s,[t("div",ws,[t("div",bs,[t("div",Ts,[t("aside",Ms,[t("nav",$s,[t("div",null,[t("div",Ss,[i(u)]),t("div",Ds,[!e.isCurrentTeamAGuestTeam&&!e.hasMaxSeatsOfOne?(s(),y(v,{key:0,active:e.view.name===e.VIEWS.TEAM_DIAGRAMS,onClick:a[0]||(a[0]=m=>e.setTeamView(e.currentTeam.id))},{icon:r(()=>[i(c,{icon:"heroicons/v2-outline/rectangle-stack",size:1.5})]),default:r(()=>[xs]),_:1},8,["active"])):d("",!0),e.isCurrentTeamAGuestTeam?d("",!0):(s(),y(v,{key:1,active:e.view.name===e.VIEWS.TEAM_MY_DIAGRAMS,onClick:a[1]||(a[1]=m=>e.setTeamMyDiagramsView(e.currentTeam.id))},{icon:r(()=>[i(c,{icon:"heroicons/v2-outline/circle-stack",size:1.5})]),default:r(()=>[Es]),_:1},8,["active"])),i(v,{active:e.view.name===e.VIEWS.TEAM_SHARED_WITH_ME_DIAGRAMS,onClick:a[2]||(a[2]=m=>e.setTeamSharedWithMeView(e.currentTeam.id))},{icon:r(()=>[i(c,{icon:"heroicons/v2-outline/arrow-path-rounded",size:1.5})]),default:r(()=>[Bs]),_:1},8,["active"]),!e.isCurrentTeamAGuestTeam&&e.foldersByTeamId.hasOwnProperty(e.currentTeam.id)?(s(),o("div",ks,[(s(!0),o(R,null,H(e.foldersByTeamId[e.currentTeam.id],m=>(s(),o("a",{key:m.id,title:m.name,class:D(["group flex w-full cursor-pointer items-center rounded-md border-l-4 border-transparent px-4 py-2 text-sm leading-5 transition duration-150 ease-in-out focus:outline-none",{"bg-gray-100 font-semibold text-indigo-600":e.view.name===e.VIEWS.TEAM_FOLDER&&m.id===e.view.folder.id,"font-medium text-gray-700 hover:bg-gray-100":e.view.name!==e.VIEWS.TEAM_FOLDER||m.id!==e.view.folder.id}]),onClick:ie=>e.setFolderView(m)},[i(c,{class:D(["-ml-1 mr-2 h-6 w-6 shrink-0 text-gray-400 transition duration-150 ease-in-out",{"text-indigo-600":e.view.name===e.VIEWS.TEAM_FOLDER&&m.id===e.view.folder.id,"text-gray-400":e.view.name!==e.VIEWS.TEAM_FOLDER||m.id!==e.view.folder.id}]),icon:"heroicons/v2-outline/folder",size:1.5},null,8,["class"]),t("span",Vs,$(m.name),1)],10,As))),128))])):d("",!0),e.currentTeamHasPermission(e.ROLE_PERMISSIONS.FOLDER_CREATE)?(s(),o("button",{key:3,class:D(["group flex w-full cursor-pointer items-center rounded-md border-l-4 border-transparent px-4 py-2 text-sm font-medium leading-5 transition duration-150 ease-in-out focus:outline-none",{"text-gray-700 hover:bg-gray-100 ":!0}]),onClick:a[3]||(a[3]=m=>e.showNewFolderModal())},[i(c,{icon:"heroicons/v2-outline/folder-plus",size:1.5,class:"-ml-1 mr-2 h-6 w-6 shrink-0 text-gray-400 transition duration-150 ease-in-out group-hover:text-gray-500 group-focus:text-gray-500"}),Cs])):d("",!0)])]),Is,t("div",Fs,[e.isCurrentTeamAGuestTeam?d("",!0):(s(),y(v,{key:0,active:e.view.name===e.VIEWS.FAVORITES,onClick:a[4]||(a[4]=m=>e.setFavoritesView())},{icon:r(()=>[i(c,{icon:"heroicons/v2-outline/star",size:1.5})]),default:r(()=>[p(" My favorites ")]),_:1},8,["active"])),i(v,{href:"/templates"},{icon:r(()=>[i(c,{icon:"heroicons/v2-outline/rectangle-group",size:1.5})]),default:r(()=>[p(" Browse templates"),Ls]),_:1})])])]),t("div",Rs,[t("div",Os,[t("div",Ps,[t("div",Gs,[t("h3",Us,$(e.viewTitle),1),e.view.name===e.VIEWS.TEAM_FOLDER&&(e.currentTeamHasPermission(e.ROLE_PERMISSIONS.FOLDER_UPDATE)||e.currentTeamHasPermission(e.ROLE_PERMISSIONS.FOLDER_DELETE))?(s(),y(M,{key:0,dark:"",width:"14rem",placement:"bottom-start"},{trigger:r(()=>[t("button",Ns,[i(c,{size:1.5,class:"h-5 w-5 text-gray-800",icon:"heroicons/outline/dots-vertical"})])]),content:r(()=>[t("div",null,[e.currentTeamHasPermission(e.ROLE_PERMISSIONS.FOLDER_UPDATE)?(s(),o("div",{key:0,class:"group flex cursor-pointer items-center px-3 py-1.5 text-sm text-gray-200 hover:bg-gray-600 hover:text-gray-200",role:"menuitem",onClick:a[5]||(a[5]=m=>e.showEditFolderModal())},[Hs,p(" Rename folder ")])):d("",!0),e.currentTeamHasPermission(e.ROLE_PERMISSIONS.FOLDER_DELETE)?(s(),o("div",{key:1,class:"group flex cursor-pointer items-center px-3 py-1.5 text-sm text-gray-200 hover:bg-gray-600 hover:text-gray-200",role:"menuitem",onClick:a[6]||(a[6]=q(m=>e.confirmDeleteFolder(),["prevent","stop"]))},[zs,p(" Delete folder ")])):d("",!0)])]),_:1})):d("",!0)])]),t("div",Ws,[t("div",js,[qs,i(b,{modelValue:e.sortBy,"onUpdate:modelValue":a[8]||(a[8]=m=>e.sortBy=m),items:e.sortOptions},{trigger:r(m=>[t("button",{ref:"activator",class:"h-full w-full rounded px-2 py-1 text-sm font-semibold text-gray-600 hover:bg-gray-100 focus:bg-gray-100 focus:outline-none",onKeydown:a[7]||(a[7]=ee(q(()=>{},["stop"]),["space"]))},[t("span",null,$(m.activeItem.text),1),i(c,{class:"ml-1",size:1,icon:"heroicons/solid/chevron-down"})],544)]),_:1},8,["modelValue","items"])]),e.currentTeamHasPermission(e.ROLE_PERMISSIONS.DIAGRAM_CREATE)?(s(),y(f,{key:0,onClick:e.showCreateDiagramModal},{default:r(()=>[p(" New Diagram ")]),_:1},8,["onClick"])):d("",!0)])]),F(t("div",Ys,[(s(),o(R,null,H(6,m=>t("div",{key:m,class:"flex flex-col overflow-hidden rounded-lg border-2 border-gray-200"},[i(C,{width:269,height:290},{default:r(()=>[Js,Qs,Ks,Zs]),_:1})])),64))],512),[[K,e.state===e.STATES.LOADING]]),i(j,{"enter-active-class":"transition ease-in duration-1000 transform origin-left","enter-from-class":"opacity-0 scale-x-50","enter-to-class":"opacity-100 scale-x-100"},{default:r(()=>[F(t("div",Xs,[(s(!0),o(R,null,H(e.displayedDiagrams,(m,ie)=>F((s(),y(z,{ref_for:!0,ref:"diagramCards",key:m.id,diagram:m,folders:e.foldersByTeamId[m.team_id],"show-more-actions":!e.isCurrentTeamAGuestTeam,onEdit:re=>e.showEditDiagramModal(m,ie),onFavorite:re=>e.favorited(m),onUnfavorite:re=>e.unfavorited(m),onConfirmDelete:re=>e.confirmDeleteDiagram(m,ie),onMovedToFolder:e.movedToFolder},null,8,["diagram","folders","show-more-actions","onEdit","onFavorite","onUnfavorite","onConfirmDelete","onMovedToFolder"])),[[K,e.state===e.STATES.LOADED]])),128))],512),[[K,e.state===e.STATES.LOADED]])]),_:1}),i(j,{"enter-active-class":"transition ease-out duration-1000 transform origin-left","enter-from-class":"opacity-0 scale-80","enter-to-class":"opacity-100 scale-100"},{default:r(()=>[e.state===e.STATES.EMPTY?(s(),o("div",ei,[t("div",ti,[ai,t("h5",si,[e.customEmptyTitle?(s(),o("span",ii,$(e.customEmptyTitle),1)):(s(),o("span",ri,"Welcome to DrawSQL"))]),e.customEmptyText?(s(),o("p",oi,$(e.customEmptyText),1)):d("",!0),e.customEmptyText?d("",!0):(s(),o("p",ni,[e.view.name===e.VIEWS.TEAM_MY_DIAGRAMS?(s(),o("span",li,"You haven't created any diagrams.")):(s(),o("span",di,"You don't have any accessible team diagrams.")),mi,t("a",{href:"#",class:"font-medium underline",onClick:a[9]||(a[9]=(...m)=>e.showCreateDiagramModal&&e.showCreateDiagramModal(...m))},"Create a new diagram"),p(" to get started or browse the gallery and "),ui,p(" for a quick preview. ")]))])])):d("",!0)]),_:1})])])])])]),i(W,{modelValue:e.isModalDiagramCreateShown,"onUpdate:modelValue":a[10]||(a[10]=m=>e.isModalDiagramCreateShown=m),folder:e.createInFolder},null,8,["modelValue","folder"]),i(x,{modelValue:e.isModalDiagramEditShown,"onUpdate:modelValue":a[11]||(a[11]=m=>e.isModalDiagramEditShown=m),diagram:e.editingDiagram,onUpdated:e.loadDiagrams},null,8,["modelValue","diagram","onUpdated"]),i(k,{modelValue:e.isBaseModalConfirmShown,"onUpdate:modelValue":a[12]||(a[12]=m=>e.isBaseModalConfirmShown=m)},{title:r(()=>[p($(e.confirmDeleteTitle),1)]),description:r(()=>[p($(e.confirmDeleteText),1)]),actionConfirm:r(()=>[i(f,{variant:"danger","is-loading":e.isDeleting,onClick:e.onConfirmDelete},{default:r(()=>[p(" Delete ")]),_:1},8,["is-loading","onClick"])]),_:1},8,["modelValue"]),i(be,{modelValue:e.isModalFolderCreateShown,"onUpdate:modelValue":a[13]||(a[13]=m=>e.isModalFolderCreateShown=m),folder:e.createInFolder,onCreated:e.folderCreated},null,8,["modelValue","folder","onCreated"]),i(Te,{modelValue:e.isModalFolderEditShown,"onUpdate:modelValue":a[14]||(a[14]=m=>e.isModalFolderEditShown=m),folder:e.view.folder,onUpdated:e.folderEdited},null,8,["modelValue","folder","onUpdated"])])}const fi=V(vs,[["render",ci],["__scopeId","data-v-77021e07"]]),pi=B({components:{AppLayout:$e,DiagramIndex:fi}});function hi(e,a,l,g,h,T){const u=n("DiagramIndex"),c=n("AppLayout");return s(),y(c,{title:"Database diagrams","navbar-type":"tall"},{header:r(()=>[p(" Database diagrams ")]),default:r(()=>[t("div",null,[i(u)])]),_:1})}const qi=V(pi,[["render",hi]]);export{qi as default};
